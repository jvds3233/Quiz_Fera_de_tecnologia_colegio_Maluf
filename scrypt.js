// Banco de perguntas
const questions = [

  {
    question: "Se 2x + 7 = 27, qual o valor de x?",
    options: ['8', '9', '10', '11', '12'],
    correct: 2,
    category: "matematica",
  },
  {
    question: "Qual √© a raiz quadrada de 169?",
    options: ['11', '12', '13', '14', '15'],
    correct: 2,
    category: "matematica",
  },
  {
    question: "Se um tri√¢ngulo tem lados de 6 cm, 6 cm e 6 cm, ele √©:",
    options: ['Equil√°tero', 'Is√≥sceles', 'Escaleno', 'Ret√¢ngulo', 'Obtus√¢ngulo'],
    correct: 0,
    category: "matematica",
  },
  {
    question: "Se 4 corresponde a 3, ent√£o 5 corresponde a quanto?",
    options: ['3.93', '3.75', '4.04', '3.7', '3.86'],
    correct: 1,
    category: "matematica",
  },
  {
    question: "Um valor de R$ 442.00 sofre aumento de 20%. Qual √© o novo valor?",
    options: ['529.41', '506.02', '532.71', '530.4', '516.57'],
    correct: 3,
    category: "matematica",
  },
  {
    question: "Se 2x + 8 = 26, qual o valor de x?",
    options: ['7', '8', '9', '10', '11'],
    correct: 2,
    category: "matematica",
  },
  {
    question: "Qual √© a raiz quadrada de 36?",
    options: ['4', '5', '6', '7', '8'],
    correct: 2,
    category: "matematica",
  },
  {
    question: "Se um tri√¢ngulo tem lados de 6 cm, 6 cm e 6 cm, ele √©:",
    options: ['Equil√°tero', 'Is√≥sceles', 'Escaleno', 'Ret√¢ngulo', 'Obtus√¢ngulo'],
    correct: 0,
    category: "matematica",
  },
  {
    question: "Se 4 corresponde a 5, ent√£o 5 corresponde a quanto?",
    options: ['5.72', '5.65', '6.82', '6.25', '6.3'],
    correct: 3,
    category: "matematica",
  },
  {
    question: "Um valor de R$ 216.00 sofre aumento de 20%. Qual √© o novo valor?",
    options: ['259.2', '251.77', '259.62', '267.13', '263.06'],
    correct: 0,
    category: "matematica",
  },
  {
    question: "Se 2x + 5 = 15, qual o valor de x?",
    options: ['3', '4', '5', '6', '7'],
    correct: 2,
    category: "matematica",
  },
  {
    question: "Qual √© a raiz quadrada de 400?",
    options: ['18', '19', '20', '21', '22'],
    correct: 2,
    category: "matematica",
  },
  {
    question: "Se um tri√¢ngulo tem lados de 6 cm, 6 cm e 6 cm, ele √©:",
    options: ['Equil√°tero', 'Is√≥sceles', 'Escaleno', 'Ret√¢ngulo', 'Obtus√¢ngulo'],
    correct: 0,
    category: "matematica",
  },
  {
    question: "Se 4 corresponde a 10, ent√£o 8 corresponde a quanto?",
    options: ['19.49', '20.0', '19.28', '18.31', '18.99'],
    correct: 1,
    category: "matematica",
  },
  {
    question: "Um valor de R$ 487.00 sofre aumento de 5%. Qual √© o novo valor?",
    options: ['511.35', '486.84', '517.18', '529.14', '522.21'],
    correct: 0,
    category: "matematica",
  },
  {
    question: "Se 2x + 3 = 7, qual o valor de x?",
    options: ['0', '1', '2', '3', '4'],
    correct: 2,
    category: "matematica",
  },
  {
    question: "Qual √© a raiz quadrada de 121?",
    options: ['9', '10', '11', '12', '13'],
    correct: 2,
    category: "matematica",
  },
  {
    question: "Se um tri√¢ngulo tem lados de 6 cm, 6 cm e 6 cm, ele √©:",
    options: ['Equil√°tero', 'Is√≥sceles', 'Escaleno', 'Ret√¢ngulo', 'Obtus√¢ngulo'],
    correct: 0,
    category: "matematica",
  },
  {
    question: "Se 12 corresponde a 8, ent√£o 5 corresponde a quanto?",
    options: ['3.29', '3.41', '3.33', '3.13', '3.22'],
    correct: 2,
    category: "matematica",
  },
  {
    question: "Um valor de R$ 238.00 sofre aumento de 25%. Qual √© o novo valor?",
    options: ['300.01', '284.56', '297.41', '297.5', '287.33'],
    correct: 3,
    category: "matematica",
  },
  {
    question: "Um carro percorre 120 km em 2 horas. Qual a velocidade m√©dia em km/h?",
    options: ['60', '120', '30', '80', '40'],
    correct: 0,
    category: "fisica",
  },
  {
    question: "Qual organela √© respons√°vel pela produ√ß√£o de energia (ATP) nas c√©lulas eucari√≥ticas?",
    options: ['Lisossomo', 'Mitoc√¥ndria', 'Cloroplasto', 'Ribossomo', 'N√∫cleo'],
    correct: 1,
    category: "biologia",
  },
  {
    question: "Um bloco de 2 kg √© empurrado com for√ßa resultante de 10 N. Qual a acelera√ß√£o (m/s¬≤)? (a = F/m)",
    options: ['2', '5', '10', '0.5', '20'],
    correct: 1,
    category: "fisica",
  },
  {
    question: "Em uma cadeia alimentar, os produtores s√£o geralmente:",
    options: ['Carn√≠voros', 'Herb√≠voros', 'Decompositores', 'On√≠voros', 'Organismos fotossinteticos(Plantas e algas'],
    correct: 4,
    category: "biologia",
  },
  {
    question: "Qual √© o produto principal da rea√ß√£o de combust√£o completa do metano (CH4)?",
    options: ['Monoxido de carbono', 'Di√≥xido de carbono e √°gua', '√Ågua e oxig√™nio', 'Carbono puro', '√Åcido carb√¥nico'],
    correct: 1,
    category: "quimica",
  },
  {
    question: "Uma solu√ß√£o com pH 3 √© considerada:",
    options: ['B√°sica', 'Neutra', '√Åcida', 'Alcalina', 'Salina'],
    correct: 2,
    category: "quimica",
  },
  {
   question: "Uma escola aplicou uma prova para 40 alunos. A m√©dia das notas foi 7,0. Ap√≥s a revis√£o, a nota de um aluno aumentou em 2 pontos. A nova m√©dia da turma ser√°:",
   options: ['7', '7.05', '7.1', '7.2', '7.5'],
   correct: 1,
   category: "matematica",
  },
  {
    question: "O uso das redes sociais trouxe uma nova forma de comunica√ß√£o marcada por:",
    options: ['Formalidade e rigidez gramatical', 'Abundancia de textos cientificos', 'Uso ed recursos multimodais, como memes e emojis', 'Exclus√£o da oralidade', 'Desaparecimento da escrita'],
    correct: 2,
    category: "portugues",
  },
  {
    question: "A Inconfid√™ncia Mineira (1789) foi um movimento de car√°ter:",
    options: ['Monarquia e absolutista', 'Republicano e emancipacionista', 'Escravismo e ruralismo', 'Constitucional e mon√°rquico', 'Religioso e messi√¢nico'],
    correct: 1,
    category: "historia",
  },
  {
    question: "Um carro percorre 180 km em 3 horas com velocidade constante. Qual √© a sua velocidade m√©dia?",
    options: ['30 km/h', '50km/h', '60 km/h', '70 km/h', '90 km/h'],
    correct: 2,
    category: "fisica",
  },
  {
    question: "O gr√°fico de uma fun√ß√£o do 1¬∫ grau cruza o eixo y em (0,2) e passa pelo ponto (2,6). Qual √© a equa√ß√£o da reta?",
    options: ['y = 2x + 2', 'y = x + 2', 'y = 3x + 2', 'y = 4x + 2', 'y = 2x + 3'],
    correct: 2,
    category: "matematica",
  },
  {
    question: "O processo de urbaniza√ß√£o brasileira intensificou-se principalmente a partir de:",
    options: ['Expans√£o cafeeira no s√©culo XIX', 'Industrializa√ß√£o no s√©culo XX', 'Ciclo da borracha no Norte', 'Per√≠odo colonial com os engenhos de a√ß√∫car', 'Expans√£o pecu√°ria no interior'],
    correct: 1,
    category: "geografia",
  },
  {
    question: "A sele√ß√£o natural, segundo Darwin, pode ser definida como:",
    options: ['Processo pelo qual muta√ß√µes aleat√≥rias determinam a evolu√ß√£o', 'Escolha dos indiv√≠duos mais fortes', 'Reprodu√ß√£o apenas dos mais numerosos', 'Sobreviv√™ncia diferencial de indiv√≠duos com caracter√≠sticas vantajosas', 'Exclus√£o de todas as varia√ß√µes gen√©ticas'],
    correct: 3,
    category: "biologia",
  },
  {
    question: "O Modernismo brasileiro, iniciado em 1922, defendia:",
    options: ['Valoriza√ß√£o da tradi√ß√£o portuguesa', 'Busca da linguagem rebuscada e formal', 'Ruptura com modelos europeus e valoriza√ß√£o da cultura nacional', 'Produ√ß√£o liter√°ria exclusivamente religiosa', 'Retorno ao Parnasianismo'],
    correct: 2, 
    category: "literatura",
  },
  {
    question: "Em um dado honesto, a probabilidade de sair um n√∫mero √≠mpar √©:",
    options: ['1/2', '1/3', '2/3', '1/6', '5/6'],
    correct: 0,
    category: "matematica",
  },
  {
    question: "A √°gua √© chamada de ‚Äúsolvente universal‚Äù porque:",
    options: ['Dissolve apenas subst√¢ncias polares', 'Possui alta energia de liga√ß√£o i√¥nica', 'Dissolve grande variedade de subst√¢ncias devido √† polaridade da mol√©cula', '√â apolar e interage com todos os compostos', 'Dissolve somente sais minerais'],
    correct: 2,
    category: "quimica",
  },
  //matematica
  {
    question: "Uma loja vendeu 200 produtos em uma semana. Desses, 60 foram eletr√¥nicos. Qual a porcentagem de eletr√¥nicos vendidos?",
    options: ['20%', '25%','30%', '35%', '40%'],
    correct: 1,
    category: "matematica",
  },
  {
    question: "A fun√ß√£o ùëì(x)=2x+3. O valor de ùëì(5) √©:",
    options: ['10', '11', '12', '13', '15'],
    correct: 3,
    category: "matematica",
  },
  {
    question: "O gr√°fico de uma fun√ß√£o quadr√°tica cruza o eixo x em x=‚àí2 e x=4. Qual √© a soma das ra√≠zes?",
    options: ['-2', '2', '4', '6', '8'],
    correct: 3,
    category: "matematica",
  },
  {
    question: "O n√∫mero 0,333... (peri√≥dico) equivale a:",
    options: ['1/2', '1/3', '2/3', '3/4', '1/4'],
    correct: 1,
    category: "matematica",
  },
  {
    question: "Uma roleta tem 10 partes iguais numeradas de 1 a 10. A probabilidade de sair um n√∫mero par √©:",
    options: ['1/2', '1/3', '2/3', '1/4', '3/4'],
    correct: 0,
    category: "matematica",
  },
  {
    question: "Um ret√¢ngulo tem √°rea de 48 m¬≤ e base de 6 m. A altura √©:",
    options: ['6', '7', '8', '9', '10'],
    correct: 2,
    category: "matematica",
  },
  {
    question: "Em um tri√¢ngulo equil√°tero de lado 12, o per√≠metro √©:",
    options: ['24', '30', '32', '36', '40'],
    correct: 3,
    category: "matematica",
  },
  {
    question: "O logaritmo log10 1000 √© igual a:",
    options: ['1', '2', '3', '10', '100'],
    correct: 2,
    category: "matematica",
  },
  {
    question: "Em uma turma, 60% dos alunos s√£o meninas. Se h√° 40 alunos, quantos s√£o meninos?",
    options: ['12', '16', '20', '24', '28'],
    correct: 2,
    category: "matematica",
  },
  {
    question: "Uma progress√£o aritm√©tica tem primeiro termo 5 e raz√£o 3. O 6¬∫ termo √©:",
    options: ['17', '18', '20', '21', '23'],
    correct: 3,
    category: "matematica",
  },
  {
    question: "O per√≠metro de um c√≠rculo de raio 7 cm √© (use œÄ ‚âà 3,14):",
    options: ['21,98 cm', '38,48 cm', '43,96 cm', '50,24 cm', '60,00 cm'],
    correct: 3,
    category: "matematica",
  },
  {
    question: "A m√©dia aritm√©tica de 6, 8 e 10 √©:",
    options: ['6', '7', '8', '9', '10'],
    correct: 2,
    category: "matematica",
  },
  {
    question: "Em uma urna, h√° 5 bolas vermelhas, 3 azuis e 2 verdes. A probabilidade de retirar uma bola azul √©:",
    options: ['1/10', '2/10', '3/10', '4/10', '5/10'],
    correct: 2,
    category:"matematica",
  },
  {
    question: "Uma pessoa aplicou R$ 2.000,00 a 5% de juros simples ao m√™s por 6 meses. O juro total ser√°:",
    options: ['R$ 400', 'R$ 500', 'R$ 600', 'R$ 700', 'R$ 800'],
    correct: 2,
    category: "matematica",
  },
  {
    question: "O valor da raiz quadrada de 144 √©:",
    options: ['10', '11', '12', '13', '14'],
    correct: 2,
    category: "matematica",
  },
  //portugays
  {
    question: "O uso de memes em redes sociais √© exemplo de:",
    options: ['Discurso cient√≠fico', 'Texto multimodal', 'Texto liter√°rio cl√°ssico', 'Discurso religioso', 'Texto jornal√≠stico'],
    correct: 1,
    category: "portugues",  
  },
  {
    question: "‚ÄúO sol brilhava como ouro no horizonte.‚Äù Essa frase cont√©m:",
    options: ['Met√°fora', 'Compara√ß√£o', 'Hip√©rbole', 'Ironia', 'Eufemismo'],
    correct: 1,
    category: "portugues",
  },
  {
    questions: "A Semana de Arte Moderna ocorreu em:",
    options: ['1912', '1922', '1932', '1942', '1952'],
    correct: 1,
    category: "portugues",
  },
  

];

// Vari√°veis do jogo
let currentQuestion = 0;
let score = 0;
let selected = null;
let timerInterval = null;
let timerLeft = 30;

// Elementos DOM
const startScreen = document.getElementById('start-game');
const gameScreen = document.getElementById('gameQuiz');
const resultsScreen = document.getElementById('result-pont');
const startBtn = document.getElementById('initButton');
const nextBtn = document.getElementById('next-btn');
const restartBtn = document.getElementById('resetGame');
const questionText = document.getElementById('question-text');
const optionButtons = document.querySelectorAll('.option');
const timerElement = document.getElementById('timer');
const progressElement = document.getElementById('progress');
const finalScoreElement = document.getElementById('final-pont');
const scoreMessageElement = document.getElementById('msg-pont');

// Iniciar game
function initGame() {
    startBtn.addEventListener('click', startGame);
    nextBtn.addEventListener('click', nextQuestion);
    restartBtn.addEventListener('click', resetGame);

    optionButtons.forEach((btn, index) => {
        btn.addEventListener('click', (e) => selectOption(e, index));
    });
}

function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1)); 
        [array[i], array[j]] = [array[j], array[i]]; // troca elementos
    }
    return array;
}

// Come√ßar o jogo
function startGame() {
    startScreen.style.display = 'none';
    gameScreen.style.display = 'block';
    currentQuestion = 0;
    score = 0;

    // cria uma c√≥pia embaralhada e pega s√≥ 10
    gameQuestions = shuffleArray([...questions]).slice(0, 10);

    loadQuestion();
}


// Carregar pergunta
function loadQuestion() {
    if (currentQuestion >= gameQuestions.length) {
        endGame();
        return;
    }

    const question = gameQuestions[currentQuestion];
    questionText.textContent = question.question;

    optionButtons.forEach((btn, index) => {
        btn.textContent = question.options[index];
        btn.className = 'option';
        btn.disabled = false;
    });

    selected = null;
    nextBtn.disabled = true;
    nextBtn.classList.remove('active');

    const progress = ((currentQuestion + 1) / gameQuestions.length) * 100;
    progressElement.style.width = progress + '%';

    startTimer();
}

// Selecionar op√ß√£o
function selectOption(e, index) {
    if (selected !== null) return;

    clearInterval(timerInterval);
    selected = index;
    const correctAnswer = questions[currentQuestion].correct;

    optionButtons.forEach((btn, i) => {
        if (i === correctAnswer) {
            btn.classList.add('correct');
        } else if (i === selected && i !== correctAnswer) {
            btn.classList.add('incorrect');
        }
        btn.disabled = true;
    });

    if (selected === correctAnswer) {
        score++;
    }

    nextBtn.disabled = false;
    nextBtn.classList.add('active');
}

// Pr√≥xima pergunta
function nextQuestion() {
    currentQuestion++;
    loadQuestion();
}

// Timer
function startTimer() {
    timerLeft = 30;
    timerElement.textContent = timerLeft + 's';
    timerElement.classList.remove('warning');

    timerInterval = setInterval(() => {
        timerLeft--;
        timerElement.textContent = timerLeft + 's';

        if (timerLeft <= 10) {
            timerElement.classList.add('warning');
        }

        if (timerLeft <= 0) {
            clearInterval(timerInterval);
            optionButtons.forEach(btn => btn.disabled = true);
            nextBtn.disabled = false;
            nextBtn.classList.add('active');
        }
    }, 1000);
}

// Finalizar o jogo
function endGame() {
    clearInterval(timerInterval);
    gameScreen.style.display = 'none';
    resultsScreen.style.display = 'block';

    finalScoreElement.textContent = `${score}/${gameQuestions.length}`;
    const percentage = (score / gameQuestions.length) * 100;
    let message = '';

    if (percentage === 100) {
        message = 'Rapaz... um dos dois: ou voc√™ sabe muito, ou eu que sou burro!';
    } else if (percentage >= 80) {
        message = 'Parab√©ns! Voc√™ √© bem inteligente :)';
    } else if (percentage >= 60) {
        message = 'Pelo menos acertou a maioria!';
    } else if (percentage >= 40) {
        message = 'Estude um pouco mais, por favor!';
    } else if (percentage >= 20) {
        message = 'Nem fa√ßa ENEM ou vestibular... √© capaz de deixar sua escola envergonhada.';
    } else {
        message = 'Voc√™ √© uma vergonha para a humanidade üòÖ';
    }

    scoreMessageElement.textContent = message;
}

// Reiniciar jogo
function resetGame() {
    resultsScreen.style.display = 'none';
    startScreen.style.display = 'block';
    currentQuestion = 0;
    score = 0;
    progressElement.style.width = '0%';
}

// Inicia com DOM carregado
document.addEventListener('DOMContentLoaded', initGame);